(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{587:function(s,a,t){s.exports=t.p+"assets/img/img_1.51d8deaf.png"},897:function(s,a,t){"use strict";t.r(a);var e=t(23),n=Object(e.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("p",[e("img",{attrs:{src:t(587),alt:"img_1.png"}})]),s._v(" "),e("blockquote",[e("p",[s._v("原文："),e("a",{attrs:{href:"https://pawelurbanek.com/macos-free-disk-space",target:"_blank",rel:"noopener noreferrer"}},[s._v("How to Free Disk Space on MacBook used for Development"),e("OutboundLink")],1)])]),s._v(" "),e("p",[s._v("在MacBook上 安装或更新一个应用程序有时会出奇的困难，由于磁盘空间不足。本文，我将描述几种方法，用于在MacBook上 快速、安全的清理大量存储空间。")]),s._v(" "),e("p",[s._v("近来，我已在我的MacBook Pro上实操了分析和清理磁盘空间。结果，我已设法释放10GB磁盘空间，并最终升级XCode到最新版本。")]),s._v(" "),e("h2",{attrs:{id:"分析磁盘使用情况"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#分析磁盘使用情况"}},[s._v("#")]),s._v(" 分析磁盘使用情况")]),s._v(" "),e("p",[s._v("分析磁盘空间占用较多的最好方法是使用"),e("a",{attrs:{href:"http://www.derlien.com/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Disk Inventory X"),e("OutboundLink")],1),s._v(" ，支持Mac OS 10.13+ (including 10.15 Catalina)")]),s._v(" "),e("p",[s._v("命令行安装：")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("brew "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" --cask disk-inventory-x\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("不会命令行的朋友，"),e("a",{attrs:{href:"http://www.derlien.com/download.php?file=DiskInventoryX",target:"_blank",rel:"noopener noreferrer"}},[s._v("下载安装"),e("OutboundLink")],1),s._v(" 。")]),s._v(" "),e("p",[s._v("安装后，启动台会显示："),e("img",{attrs:{src:"https://s3.ax1x.com/2021/01/22/sI70lF.png",alt:""}})]),s._v(" "),e("p",[s._v("碰到这种情况的朋友"),e("img",{attrs:{src:"https://s3.ax1x.com/2021/01/22/sI7wSU.png",alt:""}}),s._v(" ，系统偏好设置 -> 安全性与隐私 -> 通用 -> 仍要打开。")]),s._v(" "),e("p",[s._v("选择Macintosh HD进行分析，分析较慢，需要稍等片刻：\n"),e("img",{attrs:{src:"https://s3.ax1x.com/2021/01/22/sI7DOJ.png",alt:""}})]),s._v(" "),e("p",[s._v("该应用有清晰的界面展示磁盘使用情况：\n"),e("img",{attrs:{src:"https://s3.ax1x.com/2021/01/22/sI7sm9.png",alt:""}})]),s._v(" "),e("p",[s._v("下面，让我们来讨论减少磁盘使用量的小效果。")]),s._v(" "),e("h2",{attrs:{id:"删除冗余应用程序缓存"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#删除冗余应用程序缓存"}},[s._v("#")]),s._v(" 删除冗余应用程序缓存")]),s._v(" "),e("p",[s._v("在我的电脑上，大量非必要数据存放在: "),e("code",[s._v("~/Library/Caches")]),s._v("。我意识到有几百兆跟一年多没用过的Yarn有关。显然，很多应用程序都希望缓存数据，而忽略了随后的清理工作。")]),s._v(" "),e("p",[e("img",{attrs:{src:"https://s3.ax1x.com/2021/01/22/sI7By4.png",alt:""}})]),s._v(" "),e("p",[s._v("你可以使用以下命令彻底清除缓存：")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" ~/Library/Caches\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" -rf *\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("或者，你也可以选择要删除缓存的文件。我已经定期清理总缓存几个月了。除了暂时的系统速度变慢之外，没发现其他任何问题。")]),s._v(" "),e("p",[s._v("很显然，过段时间缓存会重新产生。但是即使经过更长时间，也不会有原来那么大。清理30多GB缓存后，使用一周电脑缓存也只增加到2GB。\n"),e("img",{attrs:{src:"https://s3.ax1x.com/2021/01/22/sI7ywR.png",alt:""}})]),s._v(" "),e("h2",{attrs:{id:"删除旧的日志文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#删除旧的日志文件"}},[s._v("#")]),s._v(" 删除旧的日志文件")]),s._v(" "),e("p",[s._v("我平常使用Ruby on Rails最多。使用Disk Inventory X，我发现运行本地测试会持续写log到"),e("code",[s._v("log/test.log")]),s._v("。\n"),e("img",{attrs:{src:"https://s3.ax1x.com/2021/01/22/sI76T1.png",alt:""}})]),s._v(" "),e("p",[s._v("可以想象到其他应用也在以同样方式占用磁盘。Disk Inventory X对于识别和修复此类问题非常友好。")]),s._v(" "),e("h2",{attrs:{id:"减少docker使用磁盘空间"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#减少docker使用磁盘空间"}},[s._v("#")]),s._v(" 减少Docker使用磁盘空间")]),s._v(" "),e("p",[e("img",{attrs:{src:"https://s3.ax1x.com/2021/01/22/sI7gFx.png",alt:""}})]),s._v(" "),e("p",[s._v("Docker以侵占磁盘空间著名。可以通过以下命令查看Docker占用了多少磁盘空间：")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("docker system "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("df")]),s._v("\n\nTYPE            TOTAL     ACTIVE    SIZE      RECLAIMABLE\nImages          "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v("        "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("         "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(".115GB   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".577GB "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("74")]),s._v("%"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nContainers      "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("         "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("         "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("138")]),s._v(".4MB   0B "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("%"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nLocal Volumes   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v("        "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("         "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".564GB   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".347GB "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("86")]),s._v("%"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nBuild Cache     "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("         "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("         0B        0B\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])]),e("p",[s._v("运行"),e("code",[s._v("docker images")]),s._v("查看哪些镜像占用空间最大:")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("docker images\n\nREPOSITORY     TAG          IMAGE ID      CREATED        SIZE\npihole/pihole  latest       4642d275ab73  "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" months ago   296MB\npostgres       "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("11.8")]),s._v("-alpine  a7f73db0b977  "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" months ago   156MB\npostgres       "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("12.3")]),s._v("-alpine  17150f4321a3  "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" months ago   157MB\npostgres       "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("9.6")]),s._v("-alpine   45f463e53bc1  "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" months ago   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("36")]),s._v(".1MB\nalpine         latest       a24bb4013296  "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(" months ago   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(".57MB\npostgres       "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("12.2")]),s._v("-alpine  ae192c4d3ada  "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(" months ago   152MB\npostgres       "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("9.6")]),s._v(".17       529a7b20fb73  "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(" months ago   200MB\npostgres       "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("11.6")]),s._v("-alpine  89ae06c2ad76  "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(" months ago  152MB\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br")])]),e("p",[s._v("在我的电脑上，我有好几个版本的postgres镜像，每个都占用大量空间。可以用以下命令移除Docker镜像：")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("docker rmi -f IMAGE_ID\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("以我的经验来看，镜像通常占用大部分磁盘空间。但是，如果您想进行更全面的清理，包括Docker容器，网络和缓存，请使用以下命令：")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("docker system prune\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("我之所以选择全面清理，是因为所有的本地Docker项目都可以轻松的用seed data创建。\n注意：在删除容器或卷之前，请确保仔细检查是否没有难以恢复的数据。")]),s._v(" "),e("p",[s._v("查看"),e("a",{attrs:{href:"https://docs.docker.com/config/pruning/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Docker文档"),e("OutboundLink")],1),s._v(" 以了解有关其他修剪命令的更多信息。")]),s._v(" "),e("h2",{attrs:{id:"最后"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#最后"}},[s._v("#")]),s._v(" 最后")]),s._v(" "),e("p",[s._v("希望那些建议会帮助你轻松释放大量磁盘空间。良好的做法是用Disk Inventory X定期检查是否有不必要的磁盘占用，这将有助于帮助你保持良好的磁盘使用。")])])}),[],!1,null,null,null);a.default=n.exports}}]);